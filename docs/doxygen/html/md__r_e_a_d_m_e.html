<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PolyMPS: PolyMPS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="PolyMPS_logo.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">PolyMPS<span id="projectnumber">&#160;0.0.1</span>
   </div>
   <div id="projectbrief">Short description of PolyMPS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">PolyMPS </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >A C++ code for numerical modelling of free-surface flow :ocean: using Explicit, Weakly Compressible or Incompressible Moving Particle Simulation/Semi-implicit <a href="https://doi.org/10.13182/NSE96-A24205">MPS</a> method. Boundary walls can be modeled by polygonal mesh (triangles) or discrete layers of wall and dummy (ghost) particles.</p>
<p ><img src="/output/dambreak01_movie.gif" alt="" width="96%" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md1"></a>
How to cite PolyMPS ?</h1>
<p >If you use PolyMPS, please cite the following reference:</p>
<p >Amaro Jr, R. A. and Cheng, L.Y. "PolyMPS - An open source CFD solver based on Polygon walls in Moving Particle Semi-implicit (MPS) method", Software Impacts, 14. <a href="https://doi.org/10.1016/j.simpa.2022.100376">https://doi.org/10.1016/j.simpa.2022.100376</a></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Forum</h1>
<p >On the <a href="https://github.com/rubensamarojr/polymps/discussions">PolyMPS Discussions</a> page you can ask questions, discuss about simulation issues, share ideas, and interact with other members.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Contents</h1>
<ul>
<li>Dependencies</li>
<li>PolyMPS workflow</li>
<li>Input files<ul>
<li>Foldernames, Filenames, Physical and Numerical parameters</li>
<li>Solid domain</li>
<li>Fluid domain</li>
</ul>
</li>
<li>Compile</li>
<li>Run<ul>
<li>on LINUX</li>
<li>on WINDOWS</li>
</ul>
</li>
<li>Json input filename</li>
<li>Additional note</li>
<li>Output</li>
<li>Directories</li>
<li>License</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Dependencies</h1>
<ul>
<li><a href="https://gcc.gnu.org">GCC (GNU Compiler Collection)</a></li>
<li><a href="http://eigen.tuxfamily.org">Eigen</a></li>
<li><a href="https://github.com/libigl/libigl">libigl</a></li>
<li><a href="https://github.com/nlohmann/json">JSON for Modern C++</a></li>
</ul>
<p >In order to install C++ compiler (GCC) on <b>windows</b>, we recommend to install <a href="https://cygwin.com">Cygwin</a>. You can find <a href="https://www3.ntu.edu.sg/home/ehchua/programming/howto/Cygwin_HowTo.html">here</a> how to install Cygwin. The following Packages should be selected during the Cygwin installation:</p><ul>
<li>automake</li>
<li>gcc-core</li>
<li>gcc-fortran</li>
<li>gcc-g++</li>
<li>gdb</li>
<li>libstdc++</li>
<li>make</li>
</ul>
<p >Eigen, libigl and JSON for Modern C++ are third party <a href="https://en.wikipedia.org/wiki/Header-only">header-only</a> libraries, i.e., they do not need to be separately compiled, packaged and installed to be used :heart_eyes:.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
PolyMPS workflow</h1>
<p ><img src="/output/workflow.jpg" alt="" width="100%" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md6"></a>
Input files</h1>
<p >Please have a look at some examples in the folder <a href="https://github.com/rubensamarojr/polymps/tree/master/input"><b>input</b></a>.</p>
<p >In order to run these examples, please, go to the directory <b>input/grid</b> and extract the compressed folder <a href="https://github.com/rubensamarojr/polymps/blob/master/input/grid/grid.zip"><b>grid.zip</b></a> in the grid directory itself.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Foldernames, Filenames, Physical and Numerical parameters</h2>
<p >It is necessary to create a file (extension **.json**) and set all parameters.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Solid domain</h2>
<ol type="1">
<li>... using <b>triangular meshes</b>. It is necessary to create a file (extension **.stl**) with informations about the initial geometry.</li>
<li>... using <b>particles</b>. Necessary to add one layer of wall particles (material ID = 2) and two layers of dummy particles (material ID = 3) in the **.grid** file.</li>
</ol>
<h2><a class="anchor" id="autotoc_md9"></a>
Fluid domain</h2>
<p >It is necessary to create a file (extension **.grid**) with informations about the initial geometry and some numerical and physical parameters:</p><ul>
<li>First line: <b>0</b></li>
<li>Second line: <b>number of particles</b></li>
<li>Next lines in the columns:<ul>
<li>material <b>ID</b></li>
<li>initial coordinates of particles <b>X</b> <b>Y</b> <b>Z</b></li>
<li>initial fluid velocities <b>VX</b> <b>VY</b> <b>VZ</b> (generally 0.0 0.0 0.0)</li>
<li>initial particle pressure <b>P</b> (generally 0.0)</li>
<li>initial presure average <b>PAV</b> (generally 0.0)</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Compile</h1>
<p >Code compiled and tested on Windows 7, and Linux CentOS 7 and Ubuntu64.</p>
<p >You can build the project in GNU/Linux using the makefile. Follow these steps (CPU version):</p>
<p >Clone this repository into your system using <code>terminal in Linux</code>, and <a href="https://gitforwindows.org/">Git BASH</a> <code>or command prompt (cmd) in Windows</code> </p><div class="fragment"><div class="line">git clone https://github.com/rubensaaj/polymps.git</div>
</div><!-- fragment --><p> Go to the folder <b>polymps</b> </p><div class="fragment"><div class="line">cd polymps</div>
</div><!-- fragment --><p> Now, clone the third party libraries. You must run two commands </p><div class="fragment"><div class="line">git submodule init</div>
</div><!-- fragment --><p> to initialize your local configuration file, and </p><div class="fragment"><div class="line">git submodule update</div>
</div><!-- fragment --><p> to fetch all the data from the third party libraries.</p>
<p >Edit the <code>Makefile</code> file (if necessary) with a text editor.</p>
<p >Make sure the environment is clean and ready to compile </p><div class="fragment"><div class="line">make clean</div>
</div><!-- fragment --><p> Execute make </p><div class="fragment"><div class="line">make all</div>
</div><!-- fragment --><p >This should create a binary <code>main</code> in folder <b>bin</b></p>
<h1><a class="anchor" id="autotoc_md11"></a>
Run</h1>
<p >:warning:FIRST OF ALL, go to the directory <b>input/grid</b> and extract the compressed folder <a href="https://github.com/rubensamarojr/polymps/blob/master/input/grid/grid.zip"><b>grid.zip</b></a> in the grid directory itself. Check if <b>dam1610_3D_fluid_lo0p010_mps.grid</b> contains the data mentioned before in Fluid domain.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
on LINUX</h2>
<p >In the terminal, type </p><div class="fragment"><div class="line">./bin/main</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md13"></a>
on WINDOWS</h2>
<p >You can do this in two ways:</p>
<p >1st way - In the command prompt, type </p><div class="fragment"><div class="line">bin\main.exe</div>
</div><!-- fragment --><p> 2nd way - Move the <em>main.exe</em> from the folder <b>bin</b> to the root folder <b>polymps</b>. After that, double click on <em>main.exe</em>.</p>
<h1><a class="anchor" id="autotoc_md14"></a>
Json input filename</h1>
<p >Type the name of the json input file (located in input directory), e.g. </p><div class="fragment"><div class="line">MpsInputExample</div>
</div><!-- fragment --><p >You can specify a different case by changing numerical and physical parameters in the input json file. Also, input grid and stl files should be updated according your problem. We recommend that you rename the json file, e.g. <b>case_02.json</b>, and set a new name to output folder. After that, you can run PolyMPS at any time, and type the name of the new json input file, e.g. </p><div class="fragment"><div class="line">case_02</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md15"></a>
Output</h1>
<p >This code writes pvd (header file) and corresponding vtu files as output. Look in the <b>output</b> directory. You can visualize them by open the pvd file with <a href="https://www.paraview.org">Paraview</a> :eyes:.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Directories</h1>
<p >The PolyMPS contains several files and directories:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File/Folder   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">eigen   </td><td class="markdownTableBodyNone">library for linear algebra: matrices, vectors, numerical solvers, and related algorithms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">include   </td><td class="markdownTableBodyNone">header files    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">input   </td><td class="markdownTableBodyNone">simple input examples (json, grid and stl files). Grid files compressed in a folder    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">libigl   </td><td class="markdownTableBodyNone">geometry processing library    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">json   </td><td class="markdownTableBodyNone">file that uses human-readable text to store and transmit data objects    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">output   </td><td class="markdownTableBodyNone">ouput files (pvd, vtu and txt files)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">src   </td><td class="markdownTableBodyNone">source files    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LICENSE   </td><td class="markdownTableBodyNone">MIT License    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Makefile   </td><td class="markdownTableBodyNone">set of tasks to compile the program    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">README   </td><td class="markdownTableBodyNone">text file   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md17"></a>
License</h1>
<p >This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
